<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>wahaha</title>
    <link rel="stylesheet" href="CSS/styles.css" />
  </head>
  <body>
    <header>
      <h1>Study Hub</h1>
      <nav>
        <ul>
          <li><a href="#pomodoro">Pomodoro Timer (Except only todo list is working)</a></li>
        </ul>
      </nav>
    </header>
    <div id="container">
      <aside id="sidebar">
        <nav>
          <ul>
            <li>
              <a href="settings.html">
                <img src="settings-icon.png" alt="Settings" />Settings
              </a>
            </li>
            <li><a href="study-stats.html">Study Stats</a></li>
            <li><a href="history.html">History</a></li>
            <li><a href="youtube-download.html">Youtube downloader</a></li>
            <li><a href="./todo/todo.html">To-Do List (Only thing working here)</a></li>
          </ul>
        </nav>
      </aside>
      <main id="main">
        <section id="pomodoro">
          <div id="timer-display">25:00</div>
          <div id="timer-controls">
            <button id="start-btn">Start</button>
            <button id="pause-btn">Pause</button>
            <button id="reset-btn">Reset</button>
          </div>
        </section>
      </main>
    </div>
    <footer>
      <p>&copy; 2025 Website name here. No rights reserved.</p>
    </footer>

    <!-- Modal -->
    <div id="settings-modal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Settings</h2>
        <p>Here you can adjust your settings. (Placeholder content)</p>
      </div>
    </div>

    <script>
      // Timer functionality
      let timer;
      let isRunning = false;
      let timeLeft = 25 * 60; // 25 minutes in seconds

      const timerDisplay = document.getElementById("timer-display");
      const startBtn = document.getElementById("start-btn");
      const pauseBtn = document.getElementById("pause-btn");
      const resetBtn = document.getElementById("reset-btn");

      function updateDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerDisplay.textContent =
          (minutes < 10 ? "0" : "") +
          minutes +
          ":" +
          (seconds < 10 ? "0" : "") +
          seconds;
      }

      function startTimer() {
        if (!isRunning) {
          isRunning = true;
          timer = setInterval(() => {
            if (timeLeft > 0) {
              timeLeft--;
              updateDisplay();
            } else {
              clearInterval(timer);
              isRunning = false;
              alert("Time's up! Take a break.");
            }
          }, 1000);
        }
      }

      function pauseTimer() {
        if (isRunning) {
          clearInterval(timer);
          isRunning = false;
        }
      }

      function resetTimer() {
        clearInterval(timer);
        isRunning = false;
        timeLeft = 25 * 60;
        updateDisplay();
      }

      startBtn.addEventListener("click", startTimer);
      pauseBtn.addEventListener("click", pauseTimer);
      resetBtn.addEventListener("click", resetTimer);

      updateDisplay();

      // Simplified inline edit for timer display
      timerDisplay.addEventListener("click", function () {
        // Get the current minutes
        let currentMinutes = Math.floor(timeLeft / 60);
        // Create an input element
        const input = document.createElement("input");
        input.type = "number";
        input.min = "1";
        input.value = currentMinutes;
        input.style.width = "50px";
        input.style.fontSize = "1em";
        // Replace timer display with the input
        timerDisplay.textContent = "";
        timerDisplay.appendChild(input);
        input.focus();

        // When the input loses focus or Enter is pressed, update the timer
        input.addEventListener("blur", function () {
          let newMinutes = parseInt(input.value, 10);
          if (!isNaN(newMinutes) && newMinutes > 0) {
            timeLeft = newMinutes * 60;
          }
          updateDisplay();
        });

        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") {
            input.blur();
          }
        });
      });

      // Modal functionality
      // Note: The settings button in the sidebar is a link to settings.html.
      // If you want to trigger the modal instead, adjust accordingly.
      const settingsBtn = document.getElementById("settings-btn");
      const modal = document.getElementById("settings-modal");
      const closeBtn = document.getElementsByClassName("close")[0];

      if (settingsBtn) {
        settingsBtn.addEventListener("click", (event) => {
          event.preventDefault(); // Prevent default if it's a link
          modal.style.display = "block";
        });
      }

      closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });

      window.addEventListener("click", (event) => {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
